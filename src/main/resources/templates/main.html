<!DOCTYPE HTML>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="childrenBody">
<form class="layui-form">
	<blockquote class="layui-elem-quote quoteBox">
		<form class="layui-form">
			<div class="layui-inline">
				<div class="layui-input-inline">
					<input type="text" class="layui-input searchVal" placeholder="请输入搜索的内容" />
				</div>
				<a class="layui-btn search_btn" data-type="reload">搜索</a>
			</div>
			<div class="layui-inline">
				<a class="layui-btn layui-btn-normal addNews_btn">确定</a>
			</div>
		</form>
	</blockquote>
	<table id="newsList" lay-filter="newsList"></table>

	<!--操作-->
	<script type="text/html" id="newsListBar">
		<a class="layui-btn layui-btn-xs" lay-event="edit">点击选课</a>
	</script>
</form>
<script>
    $(function(){
    	layui.use(['form','layer','laydate','table','laytpl'],function(){
    	var layer = layui.layer;
    	layer.msg('hello');
        var form = layui.form,
            layer = parent.layer === undefined ? layui.layer : top.layer,
            $ = layui.jquery,
            laydate = layui.laydate,
            laytpl = layui.laytpl,
            table = layui.table;

        //学生重修课程列表
        table.render({
            elem: '#newsList',
            url : '/json/newsList.json',
            cellMinWidth : 95,
            page : true,
            height : "full-125",
            limit : 20,
            limits : [10,15,20,25],
            id : "newsListTable",
            cols : [
            [
                {field: 'subNo', title: '课程代码', width:200, align:"center"},
                {field: 'subName', title: '课程名称', width:200, align:"center"},
                {field: 'term', title: '历史修读学期', align:'center'},
                {field: 'grade', title: '历史成绩',  align:'center'},
                {title: '选课操作', width:120, templet:'#newsListBar',fixed:"right",align:"center"},
                {field: 'choiceStatus', title: '选课情况',  align:'center'},
            ]
            ]
        });

        //搜索【此功能需要后台配合，所以暂时没有动态效果演示】
        $(".search_btn").on("click",function(){
            if($(".searchVal").val() != ''){
                table.reload("newsListTable",{
                    page: {
                        curr: 1 //重新从第 1 页开始
                    },
                    where: {
                        key: $(".searchVal").val()  //搜索的关键字
                    }
                })
            }else{
                layer.msg("请输入搜索的内容");
            }
        });

    })
    })
</script>
</body>
</html>